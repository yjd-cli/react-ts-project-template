// https://eslint.org/docs/latest/use/configure/configuration-files#configuration-file-formats
// æ³¨æ„äº‹é¡¹ï¼š
// è™½ç„¶ ESlint é…åˆç›¸å…³çš„ ESlint æ’ä»¶å¯ä»¥å®ç°å„ç§å„æ ·çš„åŠŸèƒ½ï¼Œä½† ESLint å’Œ Prettierã€Stylelintã€Typescript ç­‰å·¥å…·å­˜åœ¨åŠŸèƒ½ä¸Šçš„é‡å¤ï¼Œè¿™äº›å·¥å…·å„å¸å…¶èŒå°±å¥½ï¼Œä¸“ä¸šçš„äº‹æƒ…å°±äº¤ç»™ä¸“é—¨çš„å·¥å…·æ‰§è¡Œï¼š
// 1ã€ESLint è´Ÿè´£ JS è¯­æ³•æ ¡éªŒï¼›
// 2ã€Typescript è´Ÿè´£ TS è¯­æ³•æ ¡éªŒï¼Œå®ƒçš„éƒ¨åˆ†åŠŸèƒ½ å’Œ ESLint çš„ä¸€äº›è§„åˆ™ï¼ˆå¦‚ï¼š@typescript-eslint/recommended-requiring-type-checkingï¼‰ã€æ’ä»¶ï¼ˆå¦‚ï¼šeslint-plugin-importï¼‰ å’Œ å­˜åœ¨é‡å¤ï¼Œå¯ä»¥æ ¹æ®é¡¹ç›®æƒ…å†µå†³å®šä½¿ç”¨å“ªç§æ–¹å¼ï¼Œæˆ–è€…ä¸¤è€…éƒ½ä½¿ç”¨ï¼›
// 3ã€Prettier è´Ÿè´£æ ¼å¼åŒ–ä»£ç ï¼›
// 4ã€Stylelint è´Ÿè´£æ ¡éªŒ/æ’åº CSSã€Less ä»£ç ï¼›

{
  // https://eslint.org/docs/latest/use/configure/configuration-files#cascading-and-hierarchy
  // é»˜è®¤æƒ…å†µä¸‹ã€‚eslint ä¼šå…ˆæŸ¥æ‰¾å½“å‰ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶ï¼Œç„¶åç»§ç»­æœç´¢ç¥–å…ˆç›®å½•ä¸­çš„é…ç½®æ–‡ä»¶ï¼Œç›´è‡³æ ¹ç›®å½•ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´æ„å¤–çš„ç»“æœï¼Œè®¾ç½® "root": true å¯ä»¥é˜»æ­¢ eslint å‘ä¸ŠæŸ¥æ‰¾ï¼Œä»¥å½“å‰ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶ä¸ºå‡†ã€‚
  "root": true,

  // ç»§æ‰¿è§„åˆ™
  "extends": [
    // https://eslint.org/docs/latest/rules/
    // ä»¥ä¸Šè§„åˆ™åˆ—è¡¨ä¸­ï¼š
    // âœ… + é¢œè‰²æ­£å¸¸çš„ => ä¼šå‡ºç°åœ¨ eslint:recommended å…±äº«é…ç½®ä¸­
    // ğŸ”§ + é¢œè‰²æ­£å¸¸çš„ => å¯ä»¥é€šè¿‡ eslint --fix è‡ªåŠ¨ä¿®å¤
    // ğŸ’¡ + é¢œè‰²æ­£å¸¸çš„ => å¯ä»¥é€šè¿‡ç¼–è¾‘å™¨çš„æç¤ºæ‰‹åŠ¨ä¿®å¤
    "eslint:recommended",

    // https://typescript-eslint.io/getting-started
    // https://github.com/typescript-eslint/typescript-eslint/blob/main/packages/eslint-plugin/src/configs/recommended.ts
    "plugin:@typescript-eslint/recommended",

    // https://typescript-eslint.io/linting/typed-linting
    // https://github.com/typescript-eslint/typescript-eslint/blob/main/packages/eslint-plugin/src/configs/recommended-requiring-type-checking.ts
    // ä½¿ç”¨ @typescript-eslint/recommended-requiring-type-checking è§„åˆ™ vs ç›´æ¥ä½¿ç”¨ tsc å‘½ä»¤ + tsconfig.json ä¸­çš„è§„åˆ™è¿›è¡Œæ ¡éªŒå„æœ‰ä¼˜ç¼ºç‚¹ï¼Œå…·ä½“ä½¿ç”¨å“ªç§æ–¹å¼å–å†³ä½ çš„å…·ä½“éœ€æ±‚å’Œé¡¹ç›®æƒ…å†µ
    // "plugin:@typescript-eslint/recommended-requiring-type-checking",

    // https://www.npmjs.com/package/eslint-plugin-import
    // æ”¯æŒ ES2015+ (ES6+) å¯¼å…¥/å¯¼å‡ºè¯­æ³•çš„æ£€æŸ¥ï¼Œå¹¶é˜²æ­¢æ–‡ä»¶è·¯å¾„å’Œå¯¼å…¥åç§°æ‹¼å†™é”™è¯¯çš„é—®é¢˜
    // é»˜è®¤æƒ…å†µä¸‹ï¼Œä»…åœ¨ plugins å­—æ®µä¸­ä½¿ç”¨ eslint-plugin-import æ’ä»¶æ˜¯ä¸ä¼šå¼€å¯ä»»ä½•è§„åˆ™çš„
    // å¯ä»¥é€‰æ‹©å†…ç½®çš„è§„åˆ™é›†ï¼šhttps://github.com/import-js/eslint-plugin-import/tree/main/config
    // ğŸ’¼ è¡¨ç¤º å¯ç”¨è§„åˆ™ï¼Œè§„åˆ™ç­‰çº§é»˜è®¤ä¸º error
    // âš ï¸ è¡¨ç¤º å¯ç”¨è§„åˆ™ï¼Œè§„åˆ™ç­‰çº§ä¸º warn
    // ğŸš« è¡¨ç¤º å…³é—­è§„åˆ™
    // â˜‘ï¸ è¡¨ç¤º åœ¨ plugin:import/recommended ä¸­å†…ç½®ï¼Œç­‰ä»·äºä¸‹é¢ä¸¤ä¸ªè§„åˆ™çš„åˆé›†ã€‚
    // â— è¡¨ç¤º åœ¨ plugin:import/errors ä¸­å†…ç½®
    // ğŸš¸ è¡¨ç¤º åœ¨ plugin:import/warnings ä¸­å†…ç½®
    // ğŸ”§ è¡¨ç¤º æ‰§è¡Œ eslint --fixï¼Œä¼šè‡ªåŠ¨ä¿®å¤å½“å‰è§„åˆ™é—®é¢˜
    // ğŸ’¡ è¡¨ç¤º æ ¹æ®ç¼–è¾‘å™¨çš„æç¤ºä¿¡æ¯ï¼Œå¯ä»¥æ‰‹åŠ¨ä¿®å¤å½“å‰è§„åˆ™é—®é¢˜
    // âŒ è¡¨ç¤º è§„åˆ™å·²å¼ƒç”¨
    // plugin:import/recommended é»˜è®¤åªä¼šå¼€å¯ä¸€éƒ¨åˆ†è§„åˆ™
    "plugin:import/recommended",

    // https://www.npmjs.com/package/eslint-plugin-react
    // react è¯­æ³•æ ¡éªŒ
    "plugin:react/recommended"
    // https://stackoverflow.com/questions/64646248/eslintrc-js-for-react-17-and-jsx-without-import-react
    // react/jsx-runtime é€‚ç”¨äº React 17åŠä»¥ä¸Šçš„ç‰ˆæœ¬
    // "plugin:react/jsx-runtime",

    // https://www.npmjs.com/package/eslint-plugin-react-hooks
    // react hooks è¯­æ³•æ ¡éªŒ
    // "plugin:react-hooks/recommended"

    // https://www.npmjs.com/package/eslint-plugin-prettier
    // "plugin:prettier/recommended"
  ],

  // https://eslint.org/docs/latest/use/configure/language-options#specifying-environments
  // æŒ‡å®šç¯å¢ƒ
  "env": {
    // æ”¯æŒæµè§ˆå™¨ç¯å¢ƒ
    "browser": true,
    // æ”¯æŒè§£æ ECMAScript 2021
    "es2021": true
  },

  // æŒ‡å®šè§£æå™¨
  // https://github.com/eslint/espree
  // ESLint é»˜è®¤ä½¿ç”¨ Espree ä½œä¸ºå…¶è§£æå™¨ï¼Œä½ å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šä¸€ä¸ªä¸åŒçš„è§£æå™¨
  // https://typescript-eslint.io/#why-does-this-project-exist?
  // https://typescript-eslint.io/architecture/parser
  // ESLint é»˜è®¤çš„è§£æå™¨æ— æ³•è§£æ TypeScript ä»£ç ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ typescript-eslint çš„è§£æå™¨
  "parser": "@typescript-eslint/parser",
  // æŒ‡å®šè§£æå™¨é€‰é¡¹
  // ESLint é»˜è®¤çš„è§£æå™¨é…ç½®ï¼šhttps://eslint.org/docs/latest/use/configure/language-options#specifying-parser-options
  // typescript-eslint çš„é…ç½®ï¼šhttps://typescript-eslint.io/architecture/parser#configuration
  "parserOptions": {
    // ä½¿ç”¨æœ€æ–°æ”¯æŒçš„ ECMAScript è¯­æ³•ç‰ˆæœ¬
    "ecmaVersion": "latest",

    // å‘Šè¯‰ ESLint ä»¥ æ¨¡å—åŒ–çš„æ–¹å¼å»è§£æä»£ç 
    "sourceType": "module",

    // project å’Œ tsconfigRootDir å±æ€§ç»å¸¸æ­é… plugin:@typescript-eslint/recommended-requiring-type-checking ä¸€èµ·ä½¿ç”¨ï¼Œå¦‚æœä½¿ç”¨ plugin:@typescript-eslint/recommended-requiring-type-checkingï¼Œè¿™ä¸¤ä¸ªå±æ€§å°±å¿…é¡»é…ç½®
    // https://typescript-eslint.io/architecture/parser#project
    // "project": [
    //   "./tsconfig.eslint.json"
    // ],
    // https://typescript-eslint.io/architecture/parser/#tsconfigrootdir
    // æ³¨æ„ï¼šå¦‚æœä½ ç”¨ç¼–è¾‘å™¨ï¼ˆå¦‚ï¼švscodeï¼‰æ‰“å¼€äº†ä¸€ä¸ªç›®å½•ï¼Œè¯¥ç›®å½•ä¸‹æœ‰å¾ˆå¤šä¸ªé¡¹ç›®æ—¶ï¼Œä¼šå¯¼è‡´è·¯å¾„è§£æå‡ºç°é—®é¢˜
    //  "tsconfigRootDir": "./"
  },

  // https://eslint.org/docs/latest/use/configure/configuration-files#adding-shared-settings
  // å…±äº«é…ç½®ï¼šè¿™é‡Œçš„é…ç½®é¡¹ä¸ä¸€å®šæ˜¯ ESlint åŸç”Ÿæ”¯æŒçš„ï¼Œè€Œæ˜¯ä¸€äº› ESlint æ’ä»¶è‡ªå®šä¹‰ä½¿ç”¨çš„ï¼Œå¦‚ï¼šeslint-plugin-react ä¼šä¾èµ– react è¿™ä¸ªé…ç½®é¡¹
  "settings": {
    "react": {
      // React version. "detect" automatically picks the version you have installed.
      // You can also use `16.0`, `16.3`, etc, if you want to override the detected value.
      // It will default to "latest" and warn if missing, and to "detect" in the future
      "version": "detect"
    },

    // https://github.com/import-js/eslint-import-resolver-typescript
    // eslint-import-resolver-typescript é»˜è®¤åŒ…å«ä»¥ä¸‹æ–‡ä»¶æ‰©å±•åï¼Œæ‰€ä»¥è¿™é‡Œå°±å¯ä»¥æ³¨é‡Šäº†
    // "import/extensions": [".js", ".jsx",".ts","tsx"],
    "import/parsers": {
      // https://github.com/import-js/eslint-import-resolver-typescript
      "@typescript-eslint/parser": [".ts", ".tsx"]
    },
   "import/resolver": {
     // https://www.npmjs.com/package/eslint-import-resolver-alias
     // é»˜è®¤æƒ…å†µä¸‹ï¼Œeslint-plugin-import æ— æ³•è¯†åˆ«è·¯å¾„åˆ«å
     // é TS é¡¹ç›®ï¼šå¯ä»¥ä½¿ç”¨ eslint-import-resolver-alias æ’ä»¶è§£å†³
      //       "alias": {
      //         "map": [
      //           // è¿™é‡Œçš„è·¯å¾„åˆ«åéœ€è¦å’Œ vite.config.tsã€tscofing.json ä¸­çš„é…ç½®ä¸€è‡´
      //           ["@src", "./src"]
      //         ],
      //         "extensions": [".ts",".tsx",".js",".jsx",".css",".less"]
      //       },
     // https://github.com/import-js/eslint-import-resolver-typescript
     // TS é¡¹ç›®ï¼šå¯ä»¥ä½¿ç”¨ eslint-import-resolver-typescript æ’ä»¶è§£å†³
     "typescript": true,
   },
    // https://segmentfault.com/a/1190000042003904
    "import/ignore": ["react","react-dom"]
  },

  // ESLint æ”¯æŒä½¿ç”¨ç¬¬ä¸‰æ–¹æ’ä»¶ã€‚åœ¨ä½¿ç”¨æ’ä»¶ä¹‹å‰ï¼Œä½ å¿…é¡»ä½¿ç”¨ npm å®‰è£…å®ƒã€‚
  // åœ¨é…ç½®æ–‡ä»¶é‡Œé…ç½®æ’ä»¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ plugins å…³é”®å­—æ¥å­˜æ”¾æ’ä»¶åå­—çš„åˆ—è¡¨ã€‚æ’ä»¶åç§°å¯ä»¥çœç•¥ eslint-plugin- å‰ç¼€ã€‚ å¦‚ï¼šeslint-plugin-react
  "plugins": [
    "@typescript-eslint",
    "import",
    "react",
    // "react-hooks",
    "promise"
    // "prettier"
  ],

  // æ–°å¢è§„åˆ™/è¦†ç›–åŸºæœ¬é…ç½®ä¸­çš„è§„åˆ™
  // è§„åˆ™ç­‰çº§ï¼š
  // "off" æˆ– 0 - å…³é—­è§„åˆ™
  // "warn" æˆ– 1 - å¼€å¯è§„åˆ™ï¼Œä½¿ç”¨è­¦å‘Šçº§åˆ«çš„é”™è¯¯ï¼šwarn (ä¸ä¼šå¯¼è‡´ç¨‹åºé€€å‡º)
  // "error" æˆ– 2 - å¼€å¯è§„åˆ™ï¼Œä½¿ç”¨é”™è¯¯çº§åˆ«çš„é”™è¯¯ï¼šerror (å½“è¢«è§¦å‘çš„æ—¶å€™ï¼Œç¨‹åºä¼šé€€å‡º)
  "rules": {
    // TS ç›¸å…³è§„åˆ™ï¼šhttps://github.com/typescript-eslint/typescript-eslint/tree/main/packages/eslint-plugin/docs/rules
    "@typescript-eslint/no-unused-vars": 1,
    "@typescript-eslint/no-explicit-any": 1,
    "@typescript-eslint/no-empty-interface": 1,
    "@typescript-eslint/explicit-function-return-type": 1,
    "@typescript-eslint/ban-ts-comment": 1,
    "@typescript-eslint/ban-types": 1,

    // React ç›¸å…³è§„åˆ™
    "react/prop-types": 1,
    // å¦‚æœæ˜¯ react 17åŠä»¥ä¸Šï¼Œä»¥ä¸‹è§„åˆ™å°±å¯ä»¥å…³é—­äº†
    // "react/jsx-uses-react": 2,
    // "react/react-in-jsx-scope": 2

    // JS ç›¸å…³è§„åˆ™
    "prefer-const": 1,

    // eslint-plugin-import ç›¸å…³è§„åˆ™
    // "import/default": 1,

  }

  // https://eslint.org/docs/latest/use/configure/configuration-files#how-do-overrides-work
  // "overrides": []
}
